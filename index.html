<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SSG4FB89TG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-SSG4FB89TG');
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>B칲y칲k Kitap De를를mi</title>
  <meta name="description" content="B칲y칲k kitap de를를mi zincirine kat캼l캼n! En sevdi를niz kitab캼 payla캼n, kar캼l캼캼nda 36'ya kadar kitap alabilirsiniz.">
  <meta property="og:title" content="B칲y칲k Kitap De를를mi">
  <meta property="og:description" content="En sevdi를niz kitab캼 payla캼n, kar캼l캼캼nda 36'ya kadar kitap alabilirsiniz!">
  <meta property="og:type" content="website">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #faf6f0;
      --bg-gradient: linear-gradient(160deg, #fdf8f2 0%, #f0e8da 100%);
      --card-bg: #ffffff;
      --primary: #6B4226;
      --primary-light: #8B5E3C;
      --primary-dark: #4A2E1A;
      --accent: #E07A5F;
      --accent-hover: #c9684f;
      --green: #81B29A;
      --green-dark: #6a9b83;
      --text: #3D405B;
      --text-light: #6c6f8a;
      --text-muted: #9a9cb5;
      --border: #e8e0d4;
      --shadow: 0 2px 12px rgba(107, 66, 38, 0.08);
      --shadow-lg: 0 8px 32px rgba(107, 66, 38, 0.12);
      --radius: 16px;
      --radius-sm: 10px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-gradient);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    .container {
      max-width: 560px;
      margin: 0 auto;
      padding: 24px 16px 48px;
    }

    /* Header */
    header {
      text-align: center;
      padding: 32px 0 8px;
    }

    .logo {
      font-size: 56px;
      margin-bottom: 8px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    header h1 {
      font-size: 28px;
      font-weight: 800;
      color: var(--primary);
      letter-spacing: -0.5px;
      margin-bottom: 8px;
    }

    header .subtitle {
      font-size: 15px;
      color: var(--text-light);
      max-width: 360px;
      margin: 0 auto;
      line-height: 1.5;
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 28px 24px;
      margin-top: 20px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      animation: fadeInUp 0.4s ease-out;
      scroll-margin-top: 16px;
    }

    .card h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card > p {
      color: var(--text-light);
      font-size: 15px;
      margin-bottom: 16px;
    }

    /* Step Badge */
    .step-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      font-size: 14px;
      font-weight: 700;
      flex-shrink: 0;
    }

    /* Address Card */
    .address-display {
      background: linear-gradient(135deg, #fdf6ec 0%, #f7eed9 100%);
      border: 2px dashed var(--primary-light);
      border-radius: var(--radius-sm);
      padding: 20px;
      margin-bottom: 16px;
    }

    .address-display .addr-name {
      font-size: 18px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 8px;
    }

    .address-display .addr-detail {
      font-size: 15px;
      color: var(--text);
      line-height: 1.6;
      white-space: pre-line;
    }

    .address-display .addr-phone {
      font-size: 15px;
      font-weight: 600;
      color: var(--primary-light);
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* Form */
    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px 14px;
      border: 2px solid var(--border);
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: 15px;
      color: var(--text);
      background: var(--bg);
      transition: border-color 0.2s, box-shadow 0.2s;
      outline: none;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      border-color: var(--primary-light);
      box-shadow: 0 0 0 3px rgba(107, 66, 38, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .form-group .hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 24px;
      border: none;
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      width: 100%;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
      box-shadow: 0 4px 12px rgba(224, 122, 95, 0.3);
    }

    .btn-primary:hover {
      background: var(--accent-hover);
      box-shadow: 0 6px 16px rgba(224, 122, 95, 0.4);
      transform: translateY(-1px);
    }

    .btn-primary:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--bg);
      border-color: var(--primary-light);
    }

    .btn-green {
      background: var(--green);
      color: white;
      box-shadow: 0 4px 12px rgba(129, 178, 154, 0.3);
    }

    .btn-green:hover {
      background: var(--green-dark);
      box-shadow: 0 6px 16px rgba(129, 178, 154, 0.4);
      transform: translateY(-1px);
    }

    .btn + .btn {
      margin-top: 10px;
    }

    .btn-whatsapp {
      background: #25D366;
      color: white;
      box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
    }

    .btn-whatsapp:hover {
      background: #1fb855;
      box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
      transform: translateY(-1px);
    }

    .btn-sm {
      padding: 10px 16px;
      font-size: 13px;
    }

    .btn-row {
      display: flex;
      gap: 8px;
    }

    .btn-row .btn {
      flex: 1;
    }

    .btn-row .btn + .btn {
      margin-top: 0;
    }

    /* Share Section */
    .share-block {
      margin-bottom: 24px;
    }

    .share-block h3 {
      font-size: 15px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .text-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 16px;
      font-size: 14px;
      line-height: 1.7;
      color: var(--text);
      white-space: pre-line;
      margin-bottom: 12px;
      max-height: 200px;
      overflow-y: auto;
    }

    .url-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px 16px;
      font-size: 13px;
      color: var(--text-light);
      word-break: break-all;
      margin-bottom: 12px;
      font-family: 'SF Mono', 'Fira Code', monospace;
      line-height: 1.5;
    }

    /* Divider */
    .divider {
      height: 1px;
      background: var(--border);
      margin: 20px 0;
    }

    /* Hidden */
    .hidden {
      display: none !important;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--primary-dark);
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in {
      animation: fadeInUp 0.4s ease-out;
    }

    /* Success state */
    .success-banner {
      background: linear-gradient(135deg, #81B29A 0%, #6a9b83 100%);
      color: white;
      border-radius: var(--radius-sm);
      padding: 16px 20px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
      font-size: 15px;
    }

    /* Responsive */
    @media (max-width: 400px) {
      .container {
        padding: 16px 12px 32px;
      }

      .card {
        padding: 22px 18px;
      }

      header h1 {
        font-size: 24px;
      }

      .logo {
        font-size: 48px;
      }
    }

    /* Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid var(--accent);
      outline-offset: 2px;
    }

    /* Header link */
    .header-link {
      display: inline-block;
      margin-top: 12px;
      font-size: 13px;
      font-weight: 600;
      color: var(--accent);
      text-decoration: none;
      transition: color 0.2s;
      background: none;
      border: none;
      font-family: inherit;
      cursor: pointer;
      padding: 0;
    }

    .header-link:hover {
      color: var(--accent-hover);
      text-decoration: underline;
    }

    /* Warning banner (who shared the link) */
    .warning-banner {
      background: #FFF8E1;
      border: 1px solid #FFE082;
      border-radius: var(--radius-sm);
      padding: 14px 18px;
      margin-top: 16px;
      font-size: 14px;
      line-height: 1.6;
      color: #5D4037;
      text-align: center;
    }

    .warning-banner strong {
      color: var(--primary);
    }

    /* Error card */
    .error-card {
      background: #FFF0F0;
      border: 1px solid #FFCDD2;
      text-align: center;
    }

    .error-card h2 {
      color: #C62828;
      justify-content: center;
    }

    .error-card p {
      color: #5D4037;
    }

    /* Open source notice */
    .open-source-notice {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 16px 18px;
      margin-top: 20px;
      font-size: 13px;
      line-height: 1.7;
      color: var(--text-light);
      text-align: center;
    }

    .open-source-notice a {
      color: var(--accent);
      font-weight: 600;
      text-decoration: none;
    }

    .open-source-notice a:hover {
      text-decoration: underline;
    }

    .manual-link {
      cursor: pointer;
      color: var(--accent);
      font-weight: 600;
      text-decoration: none;
      background: none;
      border: none;
      font-family: inherit;
      font-size: inherit;
      padding: 0;
    }

    .manual-link:hover {
      text-decoration: underline;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.25s, visibility 0.25s;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 28px 24px;
      max-width: 520px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
      transform: translateY(20px);
      transition: transform 0.25s ease;
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal h2 {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--text-muted);
      padding: 4px;
      line-height: 1;
    }

    .modal-close:hover {
      color: var(--text);
    }

    .modal .step-item {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      align-items: flex-start;
    }

    .modal .step-item:last-child {
      margin-bottom: 0;
    }

    .modal .step-num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 28px;
      height: 28px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      font-size: 13px;
      font-weight: 700;
      flex-shrink: 0;
    }

    .modal .step-text {
      font-size: 14px;
      line-height: 1.6;
      color: var(--text);
      padding-top: 3px;
    }

    .modal .step-text strong {
      color: var(--primary);
    }

    .modal .message-block {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px;
      margin-top: 8px;
      font-size: 13px;
      line-height: 1.7;
      white-space: pre-line;
      color: var(--text-light);
    }

    .modal .note {
      background: #FFF8E1;
      border: 1px solid #FFE082;
      border-radius: var(--radius-sm);
      padding: 12px 16px;
      margin-top: 16px;
      font-size: 13px;
      line-height: 1.6;
      color: #5D4037;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden="true">游닄</div>
      <h1>B칲y칲k Kitap De를를mi</h1>
      <p class="subtitle">En sevdi를niz kitab캼 payla캼n, kar캼l캼캼nda 36'ya kadar kitap alabilirsiniz!</p>
      <button class="header-link" id="open-how-btn" type="button">Nas캼l 칞al캼캼r?</button>
    </header>

    <!-- Warning: who shared this link -->
    <div id="from-warning" class="warning-banner hidden"></div>

    <!-- Error: invalid/empty/missing data parameter -->
    <section id="error-section" class="card error-card hidden">
      <h2>Ge칞ersiz Link</h2>
      <p>Bu link ge칞ersiz veya bozulmu g칬r칲n칲yor. Oyuna kat캼labilmek i칞in ge칞erli bir linke ihtiyac캼n캼z var. L칲tfen linki size g칬nderen ki를den tekrar isteyin.</p>
    </section>

    <section id="send-section" class="card hidden">
      <h2><span class="step-badge">1</span> Kitap G칬nderin</h2>
      <p>En sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p a르캼daki adrese g칬nderin:</p>
      <div class="address-display">
        <div class="addr-name" id="send-name"></div>
        <div class="addr-detail" id="send-address"></div>
        <div class="addr-phone" id="send-phone">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
          <span id="send-phone-text"></span>
        </div>
      </div>
      <button class="btn btn-secondary" id="copy-address-btn" type="button">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
        Adresi Kopyala
      </button>
    </section>

    <section id="form-section" class="card">
      <h2>
        <span class="step-badge" id="form-step-badge">2</span>
        <span id="form-title">Zincire Kat캼l캼n</span>
      </h2>
      <p id="form-description">Kendi adresinizi girin ki size de kitap g칬nderilsin.</p>
      <form id="address-form" autocomplete="on">
        <div class="form-group">
          <label for="name">Ad Soyad</label>
          <input type="text" id="name" name="name" required placeholder="Ad캼n캼z ve soyad캼n캼z" autocomplete="name">
        </div>
        <div class="form-group">
          <label for="address">Adres</label>
          <textarea id="address" name="address" required placeholder="Mahalle, sokak, bina no, daire, il칞e/il" autocomplete="street-address" rows="3"></textarea>
          <div class="hint">Kitab캼n ula르ca캼 tam adresinizi yaz캼n.</div>
        </div>
        <div class="form-group">
          <label for="phone">Telefon</label>
          <input type="tel" id="phone" name="phone" required placeholder="05XX XXX XX XX" autocomplete="tel">
        </div>
        <button type="submit" class="btn btn-primary" id="submit-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
          Linkimi Olu릆ur
        </button>
      </form>
    </section>

    <section id="share-section" class="card hidden">
      <div class="success-banner fade-in">
        Linkiniz haz캼r! A르캼daki ad캼mlar캼 takip edin.
      </div>

      <div class="share-block">
        <h3>
          <span class="step-badge" id="share-step-1">2</span>
          Hik칙yenizde bu metni payla캼n
        </h3>
        <div class="text-block" id="story-text"></div>
        <button class="btn btn-primary" id="copy-story-btn" type="button">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          Metni Kopyala
        </button>
      </div>

      <div class="divider"></div>

      <div class="share-block">
        <h3>
          <span class="step-badge" id="share-step-2">3</span>
          "Var캼m" diyenlere bu linki g칬nderin
        </h3>
        <p style="font-size:14px; color:var(--text-light); margin-bottom:12px;">
          Hik칙yenize yan캼t veren herkese a르캼daki linki DM ile g칬nderin. Onlar linke t캼klay캼nca kitab캼 kime g칬ndereceklerini g칬recekler.
        </p>
        <div class="url-block" id="share-url"></div>
        <div class="btn-row">
          <button class="btn btn-green" id="copy-url-btn" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            Kopyala
          </button>
          <button class="btn btn-whatsapp" id="whatsapp-btn" type="button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
            WhatsApp
          </button>
        </div>
      </div>

      <div class="divider"></div>
      <div style="text-align:center;">
        <button class="btn btn-secondary btn-sm" id="reset-btn" type="button">Bilgilerimi De를릆ir</button>
      </div>
    </section>

    <!-- Open source notice -->
    <div class="open-source-notice">
      Bu sayfa a칞캼k kaynakl캼d캼r ve kodlar캼 <a href="https://github.com/sayginburak/kitap" target="_blank" rel="noopener">GitHub</a> 칲zerinden incelenebilir. Adresinizi ve di른r bilgilerinizi hi칞bir yere g칬ndermez; t칲m veriler yaln캼zca taray캼c캼n캼zda i륿enir.<br><br>
      E른r buna ra릀en yine de adres girmek istemezseniz, oyuna kat캼lmak i칞in <button class="manual-link" id="open-manual-btn" type="button">릇 y칬nergeleri izleyebilirsiniz</button>. Bu sayfay캼 kullanmak sadece i를nizi kolayla릆캼r캼r ve kar캼캼kl캼klar캼n 칬n칲ne ge칞er. Manuel olarak yapmay캼 se칞erseniz l칲tfen y칬nergelerdeki t칲m metni iyi okuyup anlayarak g칬nderiniz.
    </div>

    <footer style="text-align:center; padding: 24px 0 8px; color: var(--text-muted); font-size: 12px;">
      Kitaplar insanlar캼, insanlar kitaplar캼 birbirine ba륿ar.<br>
      <button class="manual-link" id="open-legal-btn" type="button" style="font-size:12px; color:var(--text-muted); margin-top:6px;">Kullan캼m Ko릇llar캼 ve Gizlilik</button>
    </footer>
  </div>

  <!-- How it works modal -->
  <div id="how-modal" class="modal-overlay">
    <div class="modal" style="position:relative;">
      <button class="modal-close" id="close-how-btn" type="button" aria-label="Kapat">&times;</button>
      <h2>Nas캼l 칂al캼캼r?</h2>

      <div class="step-item">
        <span class="step-num">1</span>
        <div class="step-text">
          Size gelen linkteki adrese en sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p g칬nderin.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">2</span>
        <div class="step-text">
          Kendi adresinizi girin ve ki를sel linkinizi olu릆urun.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">3</span>
        <div class="step-text">
          Hik칙yenizde kitap de를를mi metnini payla캼n.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">4</span>
        <div class="step-text">
          "Var캼m" diyen ki를lere olu릆urdu릇nuz linki g칬nderin.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">5</span>
        <div class="step-text">
          Onlar da linkteki adrese en sevdikleri kitab캼 g칬nderir, kendi adreslerini girip yeni link olu릆urur.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">6</span>
        <div class="step-text">
          Zincir b칬yle b칲y칲r ve herkese kitap ula캼r!
        </div>
      </div>

      <div style="margin-top:20px; text-align:center;">
        <button class="btn btn-secondary btn-sm" id="close-how-btn-2" type="button">Anlad캼m</button>
      </div>
    </div>
  </div>

  <!-- Manual instructions modal -->
  <div id="manual-modal" class="modal-overlay">
    <div class="modal" style="position:relative;">
      <button class="modal-close" id="close-modal-btn" type="button" aria-label="Kapat">&times;</button>
      <h2>Manuel Kat캼l캼m Y칬nergeleri</h2>
      <p style="font-size:14px; color:var(--text-light); margin-bottom:20px;">
       Bu siteyi kullanmadan, a르캼da kopyalayabilece를niz mesaj캼 elle d칲zenleyerek de oyuna kat캼labilirsiniz.
      </p>

      <div class="step-item">
        <span class="step-num">1</span>
        <div class="step-text">
          Linkteki veya mesajdaki adrese en sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p g칬nderin.
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">2</span>
        <div class="step-text">
          A르캼daki metni hik칙yenizde payla캼n:
          <div class="message-block" id="manual-story-text">B칲y칲k kitap de를를mi oyununa kat캼lmak isteyen insanlar ar캼yorum.
Yapman캼z gereken tek 른y en sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p bir yabanc캼ya g칬ndermek. (Size onun bilgilerini 칬zelden mesajla iletece를m.)
Kar캼l캼캼nda size 36 kitap gelebilir. D칲nyan캼n farkl캼 yerlerinden tan캼mad캼캼n캼z 36 kitapkurdunun en sevdi를 kitaplar sizin olabilir.
Kat캼lmak isterseniz bu mesaja "var캼m" yazarak cevap verin.</div>
          <button class="btn btn-primary btn-sm" id="copy-manual-story-btn" type="button" style="margin-top:10px;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            Metni Kopyala
          </button>
        </div>
      </div>

      <div class="step-item">
        <span class="step-num">3</span>
        <div class="step-text">
          Hik칙yenize "var캼m" diyen ki를lere a르캼daki mesaj캼 g칬nderin. G칬ndermeden 칬nce d칲zenleyin:
          <ul style="margin-top:8px; margin-bottom:8px; padding-left:18px; font-size:13px; color:var(--text-light);" id="manual-instructions-list">
            <li><strong>캻lk adres</strong> k캼sm캼na "var캼m" dedi를niz (size linki g칬nderen) ki를nin adresini yaz캼n.</li>
            <li>Mesaj캼n ortas캼ndaki <strong>[S캻Z캻N ADINIZ], [S캻Z캻N ADRES캻N캻Z], [S캻Z캻N TELEFONUNUZ]</strong> yazan yerlere <strong>kendi bilgilerinizi</strong> yaz캼n. Bu k캼s캼m ilk adresle kar캼릆캼r캼lmamal캼d캼r; mesajda a칞캼k칞a i르retlenmi릆ir.</li>
          </ul>
          <div class="message-block" id="manual-template-text">Harika 驕쥞잺
Bir kitab캼 릇 adrese g칬ndereceksiniz:

[VARIM DED캻뤣N캻Z K캻뤣N캻N ADI]
[VARIM DED캻뤣N캻Z K캻뤣N캻N ADRES캻]

[VARIM DED캻뤣N캻Z K캻뤣N캻N TELEFONU]

룔mdi, bu mesaj캼n en alt캼ndaki metni hik칙yenizde payla캼n. Biri yan캼t verdi를nde, bu mesaj캼 ona g칬nderin ancak yukar캼daki adresi a르캼daki adresle de를릆irin:

[S캻Z캻N ADINIZ]
[S캻Z캻N ADRES캻N캻Z]

[S캻Z캻N TELEFONUNUZ]

B칬ylece g칬nderinize yan캼t veren ki를 kitab캼 bana g칬nderecek. Siz de benim adresimin oldu릇 yere kendi adresinizi yazacaks캼n캼z ki onlar캼n 칞evresindeki insanlar da size kitap g칬ndersin. Yeniden payla릀azsan캼z bu sistem i륿emez, bu y칲zden payla릀aya devam edin.

Hik칙yenizde payla릀an캼z gereken metin a르캼dad캼r:

B칲y칲k kitap de를를mi oyununa kat캼lmak isteyen insanlar ar캼yorum.
Yapman캼z gereken tek 른y en sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p bir yabanc캼ya g칬ndermek. (Size onun bilgilerini 칬zelden mesajla iletece를m.)
Kar캼l캼캼nda size 36 kitap gelebilir. D칲nyan캼n farkl캼 yerlerinden tan캼mad캼캼n캼z 36 kitapkurdunun en sevdi를 kitaplar sizin olabilir.
Kat캼lmak isterseniz bu mesaja "var캼m" yazarak cevap verin.</div>
          <button class="btn btn-primary btn-sm" id="copy-manual-template-btn" type="button" style="margin-top:10px;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            Mesaj캼 Kopyala
          </button>
        </div>
      </div>

      <div class="note">
        <strong>칐nemli:</strong> Yeniden payla릀azsan캼z bu sistem i륿emez. Zincirin devam etmesi i칞in mutlaka hik칙yenizde payla캼n ve yan캼t verenlere mesaj캼 iletin.
      </div>

      <div style="margin-top:20px; text-align:center;">
        <button class="btn btn-secondary btn-sm" id="close-modal-btn-2" type="button">Kapat</button>
      </div>
    </div>
  </div>

  <!-- Legal / Privacy modal -->
  <div id="legal-modal" class="modal-overlay">
    <div class="modal" style="position:relative;">
      <button class="modal-close" id="close-legal-btn" type="button" aria-label="Kapat">&times;</button>
      <h2>Kullan캼m Ko릇llar캼 ve Gizlilik</h2>
      <p style="font-size:13px; color:var(--text-muted); margin-bottom:16px;">Son g칲ncelleme: 12 룟bat 2026</p>

      <div style="font-size:14px; line-height:1.8; color:var(--text-light);">
        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">1. Hizmetin Tan캼m캼</h3>
        <p style="margin-bottom:16px;">
          Bu web sitesi ("B칲y칲k Kitap De를를mi"), kullan캼c캼lar aras캼ndaki kitap de를를m zincirini kolayla릆캼rmak amac캼yla olu릆urulmu, tamamen 칲cretsiz ve a칞캼k kaynakl캼 bir ara칞t캼r. Site, yaln캼zca bir arac캼 i륿evi g칬r칲r; herhangi bir kitap sat캼캼, da캼t캼m캼 veya g칬nderi hizmeti sunmaz.
        </p>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">2. Veri 캻륿eme ve Gizlilik</h3>
        <p style="margin-bottom:12px;">
          <strong>Hi칞bir ki를sel veri sunucuya g칬nderilmez veya saklanmaz.</strong> Bu site tamamen istemci taraf캼nda (taray캼c캼n캼zda) 칞al캼캼r. Girdi를niz ad, adres ve telefon bilgileri:
        </p>
        <ul style="padding-left:20px; margin-bottom:16px;">
          <li>Yaln캼zca taray캼c캼n캼zda i륿enir.</li>
          <li>URL i칞inde Base64 format캼nda kodlanarak payla캼m linki olu릆urulur.</li>
          <li>Herhangi bir veritaban캼na, sunucuya veya 칲칞칲nc칲 taraf hizmetine iletilmez.</li>
          <li>Olu릆urulan link, i칞inde kodlanm캼 bilgileri ta캼r. <strong>Linki payla릆캼캼n캼z herkes bu bilgilere eri른bilir.</strong></li>
        </ul>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">3. Sorumluluk Reddi</h3>
        <ul style="padding-left:20px; margin-bottom:16px;">
          <li>Site sahibi ve geli릆iricileri, kullan캼c캼lar aras캼ndaki kitap g칬nderimlerinden, kay캼plar캼ndan, hasarlar캼ndan veya g칬nderilmemesinden <strong>hi칞bir 른kilde sorumlu de를ldir</strong>.</li>
          <li>Kullan캼c캼lar캼n birbirlerine ilettikleri ki를sel bilgilerin (ad, adres, telefon) dorulu릇, g칲venli를 ve kullan캼m캼 tamamen ilgili kullan캼c캼lar캼n sorumlulu릇ndad캼r.</li>
          <li>Site, kullan캼c캼lar aras캼nda herhangi bir s칬zle릀e, garanti veya taahh칲t olu릆urmaz.</li>
          <li>Kitap g칬nderim masraflar캼 ve kargo s칲re칞leri tamamen g칬nderici kullan캼c캼n캼n sorumlulu릇ndad캼r.</li>
          <li>Bu hizmet "oldu릇 gibi" sunulmaktad캼r; kesintisiz veya hatas캼z 칞al캼르ca캼na dair bir garanti verilmez.</li>
        </ul>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">4. Ki를sel Bilgi Payla캼m Riski</h3>
        <p style="margin-bottom:16px;">
          Bu oyuna kat캼larak ad캼n캼z캼, adresinizi ve telefon numaran캼z캼 칲칞칲nc칲 ki를lerle payla릀ay캼 <strong>kendi iradenizle kabul etmi</strong> olursunuz. Payla릆캼캼n캼z bilgilerin nas캼l kullan캼laca캼 칲zerinde site sahibinin herhangi bir kontrol칲 yoktur. Bilgilerinizi payla릀adan 칬nce riskleri de른rlendirmeniz 칬nerilir.
        </p>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">5. Fikri M칲lkiyet</h3>
        <p style="margin-bottom:16px;">
          Bu site a칞캼k kaynak kodlu olup kaynak kodlar캼 <a href="https://github.com/sayginburak/kitap" target="_blank" rel="noopener" style="color:var(--accent);">GitHub</a> 칲zerinden eri를lebilir. Herkes kodu inceleyebilir, kopyalayabilir ve kendi ama칞lar캼 i칞in kullanabilir.
        </p>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">6. 칂erezler ve Analitik</h3>
        <p style="margin-bottom:16px;">
          Bu site, ziyaret칞i istatistiklerini anonim olarak takip etmek amac캼yla Google Analytics kullanabilir. Google Analytics, sayfa g칬r칲nt칲leme say캼s캼 ve genel kullan캼m istatistikleri gibi anonim veriler toplar. Girdi를niz ad, adres ve telefon bilgileri Google Analytics'e <strong>kesinlikle iletilmez</strong>. Bunun d캼캼nda Google Fonts harici 칲칞칲nc칲 taraf kayna캼 y칲klenmez.
        </p>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">7. De를를klikler</h3>
        <p style="margin-bottom:16px;">
          Bu kullan캼m ko릇llar캼 칬nceden haber verilmeksizin g칲ncellenebilir. G칲ncel metin her zaman bu sayfa 칲zerinden eri를lebilir olacakt캼r.
        </p>

        <h3 style="font-size:16px; color:var(--primary); margin-bottom:8px;">8. Kabul</h3>
        <p>
          Bu siteyi kullanarak ve/veya olu릆urulan linkleri payla르rak yukar캼daki ko릇llar캼 okudu릇nuzu, anlad캼캼n캼z캼 ve kabul etti를nizi beyan etmi olursunuz.
        </p>
      </div>

      <div style="margin-top:24px; text-align:center;">
        <button class="btn btn-secondary btn-sm" id="close-legal-btn-2" type="button">Kapat</button>
      </div>
    </div>
  </div>

  <!-- Toast notification -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <script>
    // =============================================
    // Encoding / Decoding helpers
    // =============================================
    function encodeData(data) {
      const json = JSON.stringify(data);
      const bytes = new TextEncoder().encode(json);
      let binary = '';
      bytes.forEach(b => binary += String.fromCharCode(b));
      return btoa(binary)
        .replace(/\+/g, '-')
        .replace(/\//g, '_')
        .replace(/=+$/, '');
    }

    function decodeData(str) {
      try {
        let b64 = str.replace(/-/g, '+').replace(/_/g, '/');
        while (b64.length % 4) b64 += '=';
        const binary = atob(b64);
        const bytes = new Uint8Array(binary.length);
        for (let i = 0; i < binary.length; i++) {
          bytes[i] = binary.charCodeAt(i);
        }
        return JSON.parse(new TextDecoder().decode(bytes));
      } catch (e) {
        return null;
      }
    }

    // =============================================
    // Clipboard + Toast helpers
    // =============================================
    async function copyToClipboard(text) {
      try {
        await navigator.clipboard.writeText(text);
        return true;
      } catch {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.cssText = 'position:fixed;opacity:0';
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); } catch { return false; }
        finally { document.body.removeChild(ta); }
        return true;
      }
    }

    let toastTimeout;
    function showToast(msg) {
      const el = document.getElementById('toast');
      el.textContent = msg;
      el.classList.add('show');
      clearTimeout(toastTimeout);
      toastTimeout = setTimeout(() => el.classList.remove('show'), 2200);
    }

    async function copyAndToast(text, successMsg) {
      const ok = await copyToClipboard(text);
      showToast(ok ? successMsg : 'Kopyalanamad캼, l칲tfen elle kopyalay캼n.');
    }

    // =============================================
    // Story text (constant - exact original)
    // =============================================
    const STORY_TEXT = `B칲y칲k kitap de를를mi oyununa kat캼lmak isteyen insanlar ar캼yorum.
Yapman캼z gereken tek 른y en sevdi를niz kitab캼 (sadece bir tane) sat캼n al캼p bir yabanc캼ya g칬ndermek. (Size onun bilgilerini 칬zelden mesajla iletece를m.)
Kar캼l캼캼nda size 36 kitap gelebilir. D칲nyan캼n farkl캼 yerlerinden tan캼mad캼캼n캼z 36 kitapkurdunun en sevdi를 kitaplar sizin olabilir.
Kat캼lmak isterseniz bu mesaja "var캼m" yazarak cevap verin.`;

    // =============================================
    // Main app logic
    // =============================================
    const $ = (sel) => document.querySelector(sel);

    const linkData = (() => {
      const d = new URLSearchParams(window.location.search).get('d');
      return d ? decodeData(d) : null;
    })();
    const hasData = linkData && linkData.s && linkData.s.n && linkData.s.a;

    const formSection = $('#form-section');
    const shareSection = $('#share-section');

    if (!hasData) {
      // No valid link data -- show error, hide form
      $('#error-section').classList.remove('hidden');
      formSection.classList.add('hidden');
    } else {
      // Valid link -- show send-to address and form
      $('#send-section').classList.remove('hidden');

      // "From" person warning banner
      const fromName = linkData.f?.n;
      if (fromName) {
        const el = $('#from-warning');
        const strong = document.createElement('strong');
        strong.textContent = fromName;
        el.appendChild(strong);
        el.appendChild(document.createTextNode(' size bu linki g칬nderdi. E른r linkine t캼klad캼캼n캼z ki를 doru de를lse l칲tfen kontrol edin, yoksa bilgiler yanl캼 olabilir.'));
        el.classList.remove('hidden');
      }

      // Populate send-to address
      $('#send-name').textContent = linkData.s.n;
      $('#send-address').textContent = linkData.s.a;
      $('#send-phone-text').textContent = linkData.s.p || '';
      if (!linkData.s.p) $('#send-phone').style.display = 'none';

      // Pre-fill manual template with "from" address
      if (linkData.f) {
        const f = linkData.f;
        const tpl = $('#manual-template-text');
        tpl.textContent = tpl.textContent
          .replace('[VARIM DED캻뤣N캻Z K캻뤣N캻N ADI]', f.n || '')
          .replace('[VARIM DED캻뤣N캻Z K캻뤣N캻N ADRES캻]', f.a || '')
          .replace('[VARIM DED캻뤣N캻Z K캻뤣N캻N TELEFONU]', f.p || '');
        $('#manual-instructions-list').innerHTML =
          '<li><strong>캻lk adres</strong> otomatik olarak dolduruldu (size linki g칬nderen ki를nin adresi).</li>' +
          '<li>Mesaj캼n ortas캼ndaki <strong>[S캻Z캻N ADINIZ], [S캻Z캻N ADRES캻N캻Z], [S캻Z캻N TELEFONUNUZ]</strong> yazan yerlere <strong>kendi bilgilerinizi</strong> yaz캼n.</li>';
      }

      // Update step numbers
      $('#form-description').textContent = 'Kendi adresinizi girin ki size de kitap g칬nderilsin. Adresiniz bir sonraki kat캼l캼mc캼ya iletilecek.';
      $('#share-step-1').textContent = '3';
      $('#share-step-2').textContent = '4';

      // Copy address button
      $('#copy-address-btn').addEventListener('click', () => {
        const text = [linkData.s.n, linkData.s.a, linkData.s.p].filter(Boolean).join('\n');
        copyAndToast(text, 'Adres kopyaland캼!');
      });
    }

    // =============================================
    // Form submission
    // =============================================
    let generatedUrl = '';
    const LINK_SVG = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>';

    function setFormDisabled(disabled) {
      ['#name', '#address', '#phone'].forEach(s => $(s).disabled = disabled);
      const btn = $('#submit-btn');
      btn.disabled = disabled;
      btn.style.opacity = disabled ? '0.5' : '1';
      btn.innerHTML = disabled ? 'Link Olu릆uruldu &#10003;' : LINK_SVG + ' Linkimi Olu릆ur';
    }

    $('#address-form').addEventListener('submit', (e) => {
      e.preventDefault();
      const n = $('#name').value.trim();
      const a = $('#address').value.trim();
      const p = $('#phone').value.trim();
      if (!n || !a || !p) return;

      const newData = {
        s: linkData.f ? { ...linkData.f } : { ...linkData.s },
        f: { n, a, p }
      };
      generatedUrl = window.location.origin + window.location.pathname + '?d=' + encodeData(newData);

      $('#story-text').textContent = STORY_TEXT;
      $('#share-url').textContent = generatedUrl;
      shareSection.classList.remove('hidden');
      shareSection.classList.add('fade-in');
      setFormDisabled(true);
      setTimeout(() => shareSection.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
    });

    // =============================================
    // Copy buttons
    // =============================================
    $('#copy-story-btn').addEventListener('click', () => copyAndToast(STORY_TEXT, 'Metin kopyaland캼!'));
    $('#copy-url-btn').addEventListener('click', () => copyAndToast(generatedUrl, 'Link kopyaland캼!'));
    $('#whatsapp-btn').addEventListener('click', () => {
      if (generatedUrl) window.open('https://wa.me/?text=' + encodeURIComponent(generatedUrl), '_blank');
    });

    // =============================================
    // Reset
    // =============================================
    $('#reset-btn').addEventListener('click', () => {
      shareSection.classList.add('hidden');
      setFormDisabled(false);
      generatedUrl = '';
      formSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    // =============================================
    // Modals (generic)
    // =============================================
    function setupModal(overlayId, openBtnId, closeBtnIds) {
      const overlay = $(overlayId);
      const open = () => { overlay.classList.add('active'); document.body.style.overflow = 'hidden'; };
      const close = () => { overlay.classList.remove('active'); document.body.style.overflow = ''; };
      $(openBtnId).addEventListener('click', open);
      closeBtnIds.forEach(id => $(id).addEventListener('click', close));
      overlay.addEventListener('click', (e) => { if (e.target === overlay) close(); });
      return { open, close };
    }

    const howModal = setupModal('#how-modal', '#open-how-btn', ['#close-how-btn', '#close-how-btn-2']);
    const manualModal = setupModal('#manual-modal', '#open-manual-btn', ['#close-modal-btn', '#close-modal-btn-2']);
    const legalModal = setupModal('#legal-modal', '#open-legal-btn', ['#close-legal-btn', '#close-legal-btn-2']);

    // Manual modal copy buttons
    $('#copy-manual-story-btn').addEventListener('click', () => copyAndToast($('#manual-story-text').textContent, 'Metin kopyaland캼!'));
    $('#copy-manual-template-btn').addEventListener('click', () => copyAndToast($('#manual-template-text').textContent, 'Mesaj kopyaland캼!'));

    // Escape key closes all modals
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') { howModal.close(); manualModal.close(); legalModal.close(); }
    });
  </script>
</body>
</html>
